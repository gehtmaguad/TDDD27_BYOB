!function(){function o(o,t){o.when("/",{templateUrl:"/locationlist/locationlist.view.html",controller:"locationlistCtrl",controllerAs:"vm"}).when("/location/:locationid",{templateUrl:"/locationdetail/locationdetail.view.html",controller:"locationdetailCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/about/about.view.html",controller:"aboutCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode({enabled:!0,requireBase:!1})}angular.module("byobApp",["ngRoute","ui.bootstrap"]),angular.module("byobApp").config(["$routeProvider","$locationProvider",o])}(),function(){function o(){var o=this;o.header="About",o.content="This is the about page with \n\n a description of the service"}angular.module("byobApp").controller("aboutCtrl",o)}(),function(){function o(o,t,n){var e=this;e.locationdata=n,e.formdata="",e.modal={close:function(t){o.close(t)},cancel:function(){o.dismiss("cancel")}},e.onSubmit=function(){return e.formerror="",e.formdata.author||e.formdata.text?e.formdata.author?e.formdata.text?void e.addComment(e.locationdata.id,e.formdata):(e.formerror="Please fill out comment field",!1):(e.formerror="Please fill out author field",!1):(e.formerror="Please fill out fields",!1)},e.addComment=function(o,n){return t.addCommentById(o,{author:n.author,text:n.text}).success(function(o){e.modal.close(o)}).error(function(o){e.formerror="Problem solving comment "+o}),!1}}angular.module("byobApp").controller("commentModalCtrl",o),o.$inject=["$uibModalInstance","commentService","locationdata"]}(),function(){function o(o,t,n){var e=this;n.getLocationDetailById(o.locationid).success(function(o){e.location=o,e.location.mapUrl="http://maps.googleapis.com/maps/api/staticmap?center=          "+e.location.coords[1]+","+e.location.coords[0]+"&zoom=17&size=400x350&sensor=false&markers=          "+e.location.coords[1]+","+e.location.coords[0]+"&scale=2"}).error(function(o){e.error="Sorry, an error occurred. Please try again later!",console.log(o)}),e.commentModal=function(){var o=t.open({templateUrl:"/commentModal/commentModal.view.html",controller:"commentModalCtrl as vm",resolve:{locationdata:function(){return{id:e.location._id,theme:e.location.theme}}}});o.result.then(function(o){e.location.comments.push(o)})}}angular.module("byobApp").controller("locationdetailCtrl",o),o.$inject=["$routeParams","$uibModal","getLocations"]}(),function(){function o(o,t,n){var e=this;e.successFunc=function(o){var n=o.coords.latitude,r=o.coords.longitude;t.getLocationsByCoordinates(n,r,1e5,10).success(function(o){e.locations=o}).error(function(o){e.error="Sorry, an error occurred. Please try again later!",console.log(o)})},e.errorFunc=function(t){o.$apply(function(){e.error=t.message})},e.noSupportFunc=function(){o.$apply(function(){e.error="Geolocation not supported by this browser"})},n.getPosition(e.successFunc,e.errorFunc,e.noSupportFunc)}angular.module("byobApp").controller("locationlistCtrl",o),o.$inject=["$scope","getLocations","getCoordinates"]}(),function(){function o(o){var t=function(t,n){return o.post("/api/locations/"+t+"/comments",n)};return{addCommentById:t}}angular.module("byobApp").service("commentService",o),o.$inject=["$http"]}(),function(){function o(){var o=function(o,t,n){navigator.geolocation?navigator.geolocation.getCurrentPosition(o,t):n()};return{getPosition:o}}angular.module("byobApp").service("getCoordinates",o)}(),function(){function o(){return function(o){return o>=1e3?parseInt(o/1e3)+" km":parseInt(o)+" m"}}angular.module("byobApp").filter("filterDistance",o)}(),function(){function o(){return{restrict:"EA",templateUrl:"/shared/footer.directive.html"}}angular.module("byobApp").directive("byobFooter",o)}(),function(){function o(o){var t=function(t,n,e,r){return o.get("/api/locations?longitude="+n+"&latitude="+t+"&distance="+e+"&maxElements="+r)},n=function(t){return o.get("/api/locations/"+t)};return{getLocationsByCoordinates:t,getLocationDetailById:n}}angular.module("byobApp").service("getLocations",o),o.$inject=["$http"]}(),function(){function o(){return{restrict:"EA",templateUrl:"/shared/navigation.directive.html"}}angular.module("byobApp").directive("byobNavigation",o)}();